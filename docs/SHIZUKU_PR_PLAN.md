## Shizuku 통합 및 자동화 계획

### 1. 목표

Shizuku를 앱의 핵심 기능으로 통합하되, 사용자는 Shizuku의 존재를 전혀 인지하지 못하도록 완벽한 "White-Label" 솔루션을 구현합니다.

### 2. 핵심 전략: "투명한 래퍼 앱(Transparent Wrapper App)"

Shizuku 소스 코드를 직접 수정하는 대신, Shizuku를 독립적인 "엔진"으로 취급하고 우리 앱이 모든 설정 및 제어 과정을 담당하는 "래퍼" 역할을 수행합니다. 이를 통해 라이선스를 준수하면서도 완벽한 사용자 경험을 제공합니다.

### 3. 구현 계획 (단계별)

#### 3.1. 자동 설치 및 숨김 (Auto-Install & Hide)

-   **[Task 1]** Shizuku v13.5.4 APK를 앱의 `assets` 폴더에 내장합니다.
-   **[Task 2]** 앱 최초 실행 시, 내장된 APK를 사용하여 Shizuku를 자동으로 설치합니다.
-   **[Task 3]** Shizuku의 `AndroidManifest.xml`에서 `LAUNCHER` 카테고리를 제거하여 앱 목록(런처)에서 아이콘을 숨깁니다. (리패키징 또는 런타임 제어 방식 연구)

#### 3.2. 통합 설정 마법사 (Unified Setup Wizard)

-   **[Task 4]** 사용자가 Shizuku의 UI를 보지 않도록, 모든 설정 과정을 안내하는 "초기 설정 마법사" UI를 구현합니다.
-   **[Task 5]** "무선 디버깅 활성화" 단계에서 개발자 옵션 화면을 직접 열어주는 기능을 추가합니다. (`Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS`)

#### 3.3. 페어링 및 서비스 시작 자동화 (Pairing & Service Automation)

-   **[Task 6]** `NotificationListenerService`를 구현하여 시스템 알림에서 페어링 코드를 자동으로 감지하고 추출합니다.
-   **[Task 7]** Shizuku의 `AdbMdns` 및 `AdbPairingClient` 로직을 활용하여 추출된 코드로 페어링을 자동으로 완료합니다.
-   **[Task 8]** 페어링 성공 시, Shizuku API를 호출하여 서비스를 자동으로 시작합니다.

#### 3.4. 권한 부여 자동화 (Permission Grant Automation)

-   **[Task 9]** Shizuku 서비스 연결 후, `Shizuku.updateFlagsForUid()` API를 직접 호출하여 우리 앱(Vortex) 스스로에게 Shizuku 권한을 자동으로 부여합니다.
-   **[Task 10]** 사용자가 Shizuku의 "앱 관리" 화면에서 수동으로 토글을 켤 필요가 없어집니다.

### 4. 기대 효과

-   **완벽한 사용자 경험**: 사용자는 "무선 디버깅" 토글 하나만 켜면 모든 설정이 자동으로 완료됩니다.
-   **라이선스 준수**: Shizuku 원본을 수정하지 않아 Apache 2.0 라이선스를 위반하지 않습니다.
-   **유지보수 용이성**: 향후 Shizuku 엔진만 최신 버전으로 교체하면 되므로 유지보수가 간편합니다.
-   **강력한 브랜딩**: Shizuku는 완전히 보이지 않고, 모든 기능이 우리 앱의 고유 기술인 것처럼 보입니다.

### 5. 최종 사용자 시나리오

1.  사용자가 앱을 설치하고 실행합니다.
2.  "초기 설정 시작" 버튼을 누릅니다.
3.  "개발자 옵션에서 '무선 디버깅'을 켜주세요" 안내에 따라 토글을 켭니다.
4.  앱이 "설정 중..." 로딩 화면을 표시합니다. (백그라운드에서는 페어링 및 권한 부여가 자동으로 진행됩니다.)
5.  "설정이 완료되었습니다!" 메시지와 함께 사용자는 바로 앱의 핵심 기능을 사용할 수 있습니다.

---

이 계획에 따라 진행하면, 사용자는 Shizuku의 복잡성을 전혀 겪지 않고 강력한 시스템 권한을 활용하는 우리 앱의 기능을 완벽하게 경험할 수 있습니다.
