# 🚨 긴급 수정 체크리스트 (5분 소요)

## 현재 문제
```
로그 상태 (2026-01-13 00:15):
❌ 배터리 최적화: 활성화됨 (위험)
❌ UI_HIDDEN 이벤트: 13회
❌ 접근성 서비스: 강제 종료됨
```

---

## ✅ 지금 바로 확인할 5가지

### ✓ 1단계: 앱별 배터리 최적화 (30초)
```
설정 → 앱 → Vortex → 배터리 → 배터리 사용량 최적화
```
- [ ] 상단 드롭다운 "모두" 선택
- [ ] Vortex 찾기
- [ ] **"최적화 안 함"** 선택

---

### ✓ 2단계: 절전 앱 목록 확인 (1분) ⭐ 가장 중요!
```
설정 → 배터리 및 디바이스 케어 → 배터리 → 백그라운드 사용 제한
```
- [ ] **"절전 앱"** 탭 선택
- [ ] Vortex가 있는지 확인
- [ ] 있으면 제거 (길게 누르기 → 제거)
- [ ] **"깊은 절전 앱"** 탭 선택
- [ ] Vortex가 있는지 확인
- [ ] 있으면 제거

**⚠️ 여기가 가장 흔한 원인입니다!**

---

### ✓ 3단계: 자동 최적화 끄기 (30초)
```
설정 → 배터리 → 백그라운드 사용 제한 → 우측 상단 ⋮
```
- [ ] 우측 상단 **⋮ (점 3개)** 선택
- [ ] "자동 최적화" 또는 "사용하지 않는 앱 절전" 찾기
- [ ] **OFF** 로 변경

---

### ✓ 4단계: 백그라운드 데이터 허용 (30초)
```
설정 → 앱 → Vortex → 모바일 데이터
```
- [ ] "백그라운드 데이터 허용" **ON**
- [ ] "데이터 무제한 사용" **ON** (선택사항)

---

### ✓ 5단계: 휴대폰 재부팅 (1분)
- [ ] 설정 완료 후 휴대폰 재부팅
- [ ] 재부팅 후 1~4단계 다시 한번 확인 (Samsung은 재부팅 후 일부 설정이 초기화될 수 있음)

---

## 🔍 설정 후 확인

### 방법 1: 스크립트로 즉시 확인
```bash
node scripts/verify_battery_settings.js
```

### 기대 결과:
```
✅ 최근 10분간 ERROR: 0개
✅ UI_HIDDEN 이벤트 없음 - 설정 성공!
✅ 배터리 최적화가 제대로 제외되었습니다
🎉 모든 설정이 올바르게 되어 있습니다!
```

### 방법 2: 10분 후 재확인
Vortex 앱을 시작하고 10분간 방치한 후:
```bash
node scripts/check_battery_status.js
```

기대 결과:
```
🔋 배터리 최적화 상태:
   ✅ 무시됨 (안전)  ← 이것이 나와야 함!

📱 프로세스 우선순위:
   ✅ SERVICE 또는 VISIBLE
```

---

## 📱 화면 예시

### 2단계에서 찾아야 할 화면:
```
┌─────────────────────────────────┐
│ 백그라운드 사용 제한              │
├─────────────────────────────────┤
│ [절전 앱] [깊은 절전 앱]          │  ← 이 탭들을 확인!
├─────────────────────────────────┤
│                                 │
│ Vortex  [X]  ← 있으면 제거!     │
│                                 │
└─────────────────────────────────┘
```

### 3단계에서 찾아야 할 메뉴:
```
┌─────────────────────────────────┐
│ 백그라운드 사용 제한              │
│                         ⋮       │  ← 여기 클릭
├─────────────────────────────────┤
│ 드롭다운 메뉴:                   │
│ ☐ 자동 최적화          ← OFF!   │
│ ☐ 사용하지 않는 앱 절전  ← OFF!  │
└─────────────────────────────────┘
```

---

## ❓ 문제가 계속되면

### 증상 1: 스크립트에서 여전히 "활성화됨 (위험)" 표시
→ 위 5단계를 다시 확인하세요. 특히 2단계의 "절전 앱" 목록을 다시 확인하세요.

### 증상 2: UI_HIDDEN 이벤트가 계속 발생
→ 재부팅 후 다시 확인하세요. Samsung은 재부팅 시 일부 설정이 초기화될 수 있습니다.

### 증상 3: 접근성 서비스가 계속 꺼짐
→ ADB로 직접 확인:
```bash
adb shell dumpsys deviceidle whitelist | findstr com.example.twinme
```
출력이 없으면 화이트리스트에 추가되지 않은 것입니다.

---

## 🎯 핵심 포인트

**Samsung Galaxy는 배터리 최적화 설정이 5개나 됩니다.**
**하나만 끄는 것으로는 부족합니다!**

1. ✅ 앱별 배터리 최적화
2. ⭐ **절전 앱 목록 (가장 중요!)**
3. ⭐ **깊은 절전 앱 목록**
4. ✅ 자동 최적화
5. ✅ 백그라운드 데이터

**5개 모두 확인하고 설정해야 합니다!**

---

## 📚 더 자세한 정보

- 전체 가이드: `docs/SAMSUNG_BATTERY_FIX.md`
- 현재 상태 분석: `docs/CURRENT_STATUS.md`
- 실험 결과: `test_ui_hidden.md`

---

## ⏱️ 다음 액션

1. 지금 바로 위 5단계 수행 (5분)
2. 재부팅
3. `node scripts/verify_battery_settings.js` 실행
4. 10분 대기
5. `node scripts/check_battery_status.js` 실행
6. 결과 확인

**기대 소요시간:** 약 20분 (설정 5분 + 대기 10분 + 확인 5분)
